function dcvs(e,t,n){e.href=document.getElementById(t).toDataURL(),e.download=n}function limg(e){var t=new FileReader;t.onload=function(e){img.setAttribute("crossOrigin","anonymous"),$(img).error(function(){console.log("Sorry, image provided doesn't work")}),img.onload=function(){imgloaded=!0,ctx.clearRect(0,0,c.width,c.height),ctx.drawImage(img,0,0,800,800),img2.src=overlay[$("#ot").find("input").index($("#ot").find(":checked"))]},img.src=e.target.result},t.readAsDataURL(e.target.files[0])}var c,ctx,overlay=new Array("images/ContentCensored.png","images/GlobalAlly.png"),img2=new Image,img=new Image,imgloaded=!1;$(document).ready(function(){$("#ot").on("change",function(){imgloaded===!0&&(ctx.drawImage(img,0,0,800,800),img2.src=overlay[$("#ot").find("input").index($("#ot").find(":checked"))])}),c=document.getElementById("mcv"),ctx=c.getContext("2d"),img2.onload=function(){ctx.drawImage(img2,0,250),$("#output").empty(),$("#output").append('<img src="'+c.toDataURL()+'">'),$("#output").fadeIn("fast").css("display","block"),$("#dlimg").fadeIn("fast").css("display","inline-block")};var e=document.getElementById("fup");e.addEventListener("change",limg,!1),$("#dlimg").on("click",function(){dcvs(this,"mcv","globalAlly.png")})});
